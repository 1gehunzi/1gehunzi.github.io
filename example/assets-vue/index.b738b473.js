import{j as e}from"./style.0a538c9f.js";import{a}from"./index.bc0c8b0e.js";import{_ as t,m as n,u as s,S as r,aI as o,r as c,o as l,c as d,f as i,z as u,t as p,h as m,q as f,i as h,a as y,F as v,k as S}from"./common.10acb102.js";const _={key:0},b={key:0,class:"playBtn"},w=S('<div class="legendContent" data-v-def2ae78><ul data-v-def2ae78><li data-v-def2ae78><span class="round" style="background-color:#eed139;" data-v-def2ae78></span>热带低压</li><li data-v-def2ae78><span class="round" style="background-color:#0000ff;" data-v-def2ae78></span>热带风暴</li><li data-v-def2ae78><span class="round" style="background-color:#0f8000;" data-v-def2ae78></span>强热带风暴</li><li data-v-def2ae78><span class="round" style="background-color:#fe9c45;" data-v-def2ae78></span>台风</li><li data-v-def2ae78><span class="round" style="background-color:#fe00fe;" data-v-def2ae78></span>强台风</li><li data-v-def2ae78><span class="round" style="background-color:#fe0000;" data-v-def2ae78></span>超强台风</li></ul></div>',1);var g=t(n({__name:"index",setup(t){const n=window.mapWork,S=[{title:"台风编号",dataIndex:"typnumber",key:"typnumber"},{title:"台风名(中文)",dataIndex:"name_cn"},{title:"台风名(英文)",dataIndex:"name_en"}],g=[{title:"时间",dataIndex:"time_str",width:110,ellipsis:!0},{title:"风速",dataIndex:"centerSpeed",width:46},{title:"移向",dataIndex:"moveTo_str"},{title:"强度",dataIndex:"level_str"}],k=s([]),T=s(100),x=r({id:0,name_en:"",name_cn:"",path:[],show:!1,play:!1});o((()=>{a.get("//data.mars3d.cn/file/apidemo/typhoon/list_2020.json").then((function(e){const a=e.data;k.value=a.typhoonList.map((e=>({id:e[0],name_en:e[1],name_cn:e[2],typnumber:e[3],state:e[7]})))})),e((e=>{T.value=e-64}),420)}));const E={hideSelectAll:!0,onSelect:(e,t)=>{e.show=t,t?e.path?W(e):function(e){const t="http://data.mars3d.cn/file/apidemo/typhoon/view_"+e+".json";return a.get(t).then((function(e){return function(e){const a=[];return e[8].forEach((e=>{var t;let s,r,o;e[10].forEach((e=>{const a={speed:e[0],radius1:e[1],radius2:e[2],radius3:e[3],radius4:e[4]};"30KTS"===e[0]?s=a:"50KTS"===e[0]?r=a:"64KTS"===e[0]?o=a:console.log("未处理风圈",a)}));const c=null==(t=e[11])?void 0:t.BABJ;let l;c&&(l=[],c.forEach((e=>{const a={time:e[0],time_str:e[1],lon:e[2],lat:e[3],strength:e[4],centerSpeed:e[5],level:e[7],color:Y(e[7])};l.push(a)})));const d=n.formatDate(new Date(e[2]),"yy-MM-dd HH:mm");a.push({id:e[0],time:new Date(e[2]),time_str:d,level:e[3],level_str:D(e[3]),color:Y(e[3]),lon:e[4],lat:e[5],strength:e[6],centerSpeed:e[7],moveTo:e[8],moveTo_str:K(e[8]),windSpeed:e[9],circle7:s,circle10:r,circle12:o,forecast:l})})),{path:a}}(e.data.typhoon)}))}(e.id).then((function(a){e.path=a.path,W(e)})):(x.show=!1,x.play=!1,x.path=[],x.name_cn="",n.unSelectOneTyphoon(e.id))}},I=e=>({onClick:()=>{e.show&&e.path&&W(e)}});function W(e){x.path=e.path,x.name_cn=e.name_cn,x.show=!0,x.play=!1,n.selectOneTyphoon(e)}const N=e=>({onClick:()=>{n.clickPathRow(e)}}),C=()=>{n.startPlay(),x.play=!0},j=()=>{n.stopPlay(),x.play=!1};function Y(e){switch(e){case"TD":return"rgb(238,209,57)";case"TS":return"rgb(0,0,255)";case"STS":return"rgb(15,128,0)";case"TY":return"rgb(254,156,69)";case"STY":return"rgb(254,0,254)";case"SuperTY":return"rgb(254,0,0)"}}function D(e){switch(e){case"TD":return"热带低压";case"TS":return"热带风暴";case"STS":return"强热带风暴";case"TY":return"台风";case"STY":return"强台风";case"SuperTY":return"超强台风"}}function K(e){switch(e){case"N":return"北";case"NNE":return"北东北";case"NE":return"东北";case"ENE":return"东东北";case"E":return"东";case"ESE":return"东东南";case"ES":return"东南";case"SSE":return"南东南";case"S":return"南";case"SSW":return"南西南";case"SW":return"西南";case"WSW":return"西西南";case"W":return"西";case"WNW":return"西北西";case"NW":return"北西";case"NNW":return"北西北"}}return(e,a)=>{const t=c("mars-table"),n=c("mars-button"),s=c("a-space"),r=c("mars-dialog");return l(),d(v,null,[i(r,{visible:!0,right:"10",top:"10",width:"349"},{default:u((()=>[i(t,{size:"small",customRow:I,"row-selection":E,bordered:"",pagination:{pageSize:5},columns:S,"data-source":k.value,rowKey:"id"},{bodyCell:u((({column:e,text:a})=>["name"===e.dataIndex?(l(),d("a",_,p(a),1)):m("",!0)])),_:1},8,["data-source"]),x.show?(l(),d("div",b,[i(s,null,{default:u((()=>[x.play?m("",!0):(l(),f(n,{key:0,onClick:C},{default:u((()=>[h("播放")])),_:1})),x.play?(l(),f(n,{key:1,onClick:j},{default:u((()=>[h("停止")])),_:1})):m("",!0),h(" 已选择："+p(x.name_cn),1)])),_:1})])):m("",!0),x.show?(l(),f(t,{key:1,size:"small",scroll:{y:T.value},sticky:!0,bordered:"",pagination:!1,columns:g,"data-source":x.path,customRow:N,rowKey:"id"},{bodyCell:u((({text:e})=>[y("a",null,p(e),1)])),_:1},8,["scroll","data-source"])):m("",!0)])),_:1}),w],64)}}}),[["__scopeId","data-v-def2ae78"]]);export{g as default};
