import{L as e}from"./location-to.e2a3f5bb.js";import{_ as a,e as t,L as o}from"./read.03cd8dda.js";import{d as r,s as n,au as l,an as s,aH as i,o as c,c as u,a5 as d,b2 as f,a4 as m,M as b,aC as g,aA as p,_ as v}from"./common.5a7f0626.js";const h=(e=>(g("data-v-cd889cf4"),e=e(),p(),e))((()=>v("div",{class:"echatsView"},[v("div",{id:"echartsView1",style:{width:"100%",height:"100%"}})],-1)));var y=a(r({__name:"index",setup(a){const r=window.mapWork,g=n(!1);let p;window.onresize=function(){p.resize()},l((()=>{p=t(document.getElementById("echartsView1"))})),r.eventTarget.on("measureEnd",(function(e){g.value=!0,s((()=>{w(e)}))})),r.eventTarget.on("measureClick",(function(e){e.value&&s((()=>{w(e.value)}))}));const v=()=>{r.measureSection()},y=()=>{r.removeAll(),g.value=!1,p.clear()};function w(e){if(null==e||null==e.arrPoint)return;const a=e.arrPoint;let t="";const n={grid:{left:10,right:40,bottom:10,top:40,containLabel:!0},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:e=>{if(0===e.length)return r.hideTipMarker(),t;const o=e[0].value,n=a[e[0].dataIndex],l=r.calculation(e[0]);return t=`当前位置<br />\n                      距起点：${l.len}<br />\n                      海拔：<span style='color:${e[0].color};'>${l.hbgdStr}</span><br />\n                      经度：${n.lng}<br />\n                      纬度：${n.lat}`,r.showTipMarker(n,o,t),t}},xAxis:[{name:"行程",type:"category",nameTextStyle:{color:"rgb(255, 70, 131)"},boundaryGap:!1,axisLine:{show:!0},axisLabel:{show:!0,formatter:"{value} 米",color:"#fff"},data:e.arrLen}],yAxis:[{name:"高程",nameTextStyle:{color:"rgb(255, 70, 131)"},type:"value",min:x(a),axisLabel:{formatter:"{value} 米",color:"#fff"}}],series:[{name:"高程值",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new o(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:e.arrHB}]};p.setOption(n),p.resize()}function x(e){let a="dataMin";if(null==e||0===e.length)return a;a=e[0].alt;for(let t=0;t<e.length;t++)e[t].alt<a&&(a=e[t].alt);return a}return(a,t)=>{const o=i("mars-button"),r=i("a-space"),n=i("mars-dialog");return c(),u(b,null,[d(n,{visible:!0,right:"10",top:"10"},{default:f((()=>[d(r,null,{default:f((()=>[d(o,{onClick:v},{default:f((()=>[m("绘制线")])),_:1}),d(o,{onClick:y},{default:f((()=>[m("清除")])),_:1})])),_:1})])),_:1}),d(n,{visible:g.value,"onUpdate:visible":t[0]||(t[0]=e=>g.value=e),left:70,right:70,bottom:40},{default:f((()=>[h])),_:1},8,["visible"]),d(e)],64)}}}),[["__scopeId","data-v-cd889cf4"]]);export{y as default};
