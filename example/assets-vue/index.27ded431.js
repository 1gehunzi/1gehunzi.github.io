import{d as e,r as a,au as t,s as l,aH as n,o,c as r,a5 as i,b2 as s,_ as u,a4 as d,b4 as c,bn as p,I as h,M as x,aC as v,aA as m}from"./common.5a7f0626.js";import{_}from"./read.03cd8dda.js";const f={class:"infoView-content"},b={class:"f-mb"},g=(e=>(v("data-v-eb315bfe"),e=e(),m(),e))((()=>u("span",null,"模型URL地址: ",-1))),y={class:"f-mb"},k={class:"popup-notification"},U={class:"f-tac"};var C=_(e({__name:"index",setup(e){const v=window.mapWork,m=a({txtModel:"//data.mars3d.cn/3dtiles/max-fsdzm/tileset.json",chkProxy:!1,txtX:0,txtY:0,txtZ:0,depthTestAgainstTerrain:!1,rotationZ:0,rotationX:0,rotationY:0,scale:1,axis:"",maximumScreenSpaceError:8,opacity:1,highlightEnable:!1,popupEnable:!0}),_=[{value:"",label:"默认"},{value:"Z_UP_TO_X_UP",label:"Z轴 -> X轴"},{value:"Z_UP_TO_Y_UP",label:"Z轴 --\x3eY轴"},{value:"X_UP_TO_Y_UP",label:"X轴 --\x3eY轴"},{value:"X_UP_TO_Z_UP",label:"X轴 --\x3eZ轴"},{value:"Y_UP_TO_X_UP",label:"Y轴 --\x3eX轴"},{value:"Y_UP_TO_Z_UP",label:"Y轴 --\x3eZ轴"}],C={span:9};function T(){return{name:"模型名称",type:"3dtiles",url:m.txtModel,maximumScreenSpaceError:m.maximumScreenSpaceError,position:{lat:m.txtY,lng:m.txtX,alt:m.txtZ},rotation:{x:m.rotationX,y:m.rotationY,z:m.rotationZ},scale:m.scale,axis:m.axis?m.axis:void 0,proxy:m.chkProxy?"//server.mars3d.cn/proxy/":void 0,opacity:m.opacity,show:!0}}t((()=>{v.showModel(m.txtModel)})),v.eventTarget.on("tiles3dLayerLoad",(function(e){const a=e.layer,t=a.center;(t.alt<-1e3||t.alt>1e4)&&(t.alt=0),m.txtX=Number(t.lng.toFixed(6)),m.txtY=Number(t.lat.toFixed(6)),m.txtZ=Number(t.alt.toFixed(6)),m.maximumScreenSpaceError=a.tileset.maximumScreenSpaceError,a.transform?(m.rotationX=Number(a.rotation_x.toFixed(1)),m.rotationY=Number(a.rotation_y.toFixed(1)),m.rotationZ=Number(a.rotation_z.toFixed(1)),m.scale=a.scale||1,m.axis=a.axis):v.updateHeightForSurfaceTerrain(t)})),v.eventTarget.on("changePoition",(function(e){m.txtX=e.center.lng,m.txtY=e.center.lat,m.txtZ=e.center.alt,m.rotationX=e.rotation.x,m.rotationY=e.rotation.y,m.rotationZ=e.rotation.z})),v.eventTarget.on("changeHeight",(function(e){m.txtZ=e.alt}));const Z=()=>{v.showModel(m.txtModel),m.opacity=1,m.highlightEnable=!1,m.popupEnable=!0},X=()=>{v.updateModel(T(),m)},Y=()=>{v.updateDepthTest(m.depthTestAgainstTerrain)},P=()=>{v.locate()},E=()=>{v.saveBookmark(T())},w=l(),S=l([]),M=l(!1),A=()=>{M.value=!0,v.showCompTree(m.txtModel)};function F(e,a){if(!e.children)return;const t=e.children,l=[];return t.forEach(((e,t)=>{const n=F(e,++t);return l.push({title:e.name,key:a+"-"+t,id:e.eleid,sphere:e.sphere,children:n}),l})),l}v.eventTarget.on("compTree",(function(e){e.data.forEach(((e,a)=>{const t=F(e,a);w.value=[{title:e.name,key:a,id:e.eleid,sphere:e.sphere,children:t}],S.value.push(a)}))}));const N=l(!1),O=(e,a)=>{N.value=!0,v.compModelChange(a.node.id,a.node.sphere)},z=()=>{N.value=!1,v.checkedTree()};return(e,a)=>{const t=n("mars-button"),l=n("mars-input"),v=n("a-checkbox"),T=n("a-collapse-panel"),F=n("mars-input-number"),K=n("a-form-item"),L=n("a-col"),j=n("a-row"),H=n("mars-select"),I=n("mars-slider"),R=n("mars-switch"),B=n("a-collapse"),D=n("a-space"),V=n("a-form"),W=n("mars-dialog"),q=n("mars-tree");return o(),r(x,null,[i(W,{visible:!0,right:"10",top:"10"},{default:s((()=>[u("div",f,[i(V,{"label-col":C,labelAlign:"right"},{default:s((()=>[i(B,{collapsible:"header",defaultActiveKey:["1","2","3","4"]},{default:s((()=>[i(T,{key:"1",header:"模型URL地址"},{extra:s((()=>[i(t,{onClick:A},{default:s((()=>[d("查看构件")])),_:1})])),default:s((()=>[u("div",b,[g,d("    "),i(l,{value:m.txtModel,"onUpdate:value":a[0]||(a[0]=e=>m.txtModel=e),style:{width:"100%"}},null,8,["value"])]),u("div",y,[i(t,{onClick:Z},{default:s((()=>[d("加载模型")])),_:1}),d("    "),i(v,{checked:m.chkProxy,"onUpdate:checked":a[1]||(a[1]=e=>m.chkProxy=e)},{default:s((()=>[d("使用代理")])),_:1},8,["checked"])])])),_:1}),i(T,{key:"2",header:"模型位置"},{extra:s((()=>[i(t,{onClick:P},{default:s((()=>[d("定位至模型")])),_:1})])),default:s((()=>[i(K,{label:"经度",labelCol:{span:4}},{default:s((()=>[i(F,{value:m.txtX,"onUpdate:value":a[2]||(a[2]=e=>m.txtX=e),step:1e-6,onChange:X,style:{width:"100%"}},null,8,["value","step"])])),_:1}),i(K,{label:"纬度",labelCol:{span:4}},{default:s((()=>[i(F,{value:m.txtY,"onUpdate:value":a[3]||(a[3]=e=>m.txtY=e),step:1e-6,onChange:X,style:{width:"100%"}},null,8,["value","step"])])),_:1}),i(K,{label:"高度",labelCol:{span:4}},{default:s((()=>[i(j,{gutter:10},{default:s((()=>[i(L,{span:14},{default:s((()=>[i(F,{value:m.txtZ,"onUpdate:value":a[4]||(a[4]=e=>m.txtZ=e),step:.1,onChange:X},null,8,["value","step"])])),_:1}),i(L,{span:10},{default:s((()=>[i(v,{checked:m.depthTestAgainstTerrain,"onUpdate:checked":a[5]||(a[5]=e=>m.depthTestAgainstTerrain=e),onChange:Y},{default:s((()=>[d("深度检测")])),_:1},8,["checked"])])),_:1})])),_:1})])),_:1})])),_:1}),i(T,{key:"3",header:"模型方向"},{default:s((()=>[i(K,{label:"变换垂直轴"},{default:s((()=>[i(H,{value:m.axis,"onUpdate:value":a[6]||(a[6]=e=>m.axis=e),onChange:X,options:_},null,8,["value"])])),_:1}),i(K,{label:"绕X轴旋转模型"},{default:s((()=>[i(F,{value:m.rotationX,"onUpdate:value":a[7]||(a[7]=e=>m.rotationX=e),step:.1,onChange:X,style:{width:"100%"}},null,8,["value","step"])])),_:1}),i(K,{label:"绕Y轴旋转模型"},{default:s((()=>[i(F,{value:m.rotationY,"onUpdate:value":a[8]||(a[8]=e=>m.rotationY=e),step:.1,onChange:X,style:{width:"100%"}},null,8,["value","step"])])),_:1}),i(K,{label:"绕Z轴旋转模型"},{default:s((()=>[i(F,{value:m.rotationZ,"onUpdate:value":a[9]||(a[9]=e=>m.rotationZ=e),step:.1,onChange:X,style:{width:"100%"}},null,8,["value","step"])])),_:1})])),_:1}),i(T,{key:"4",header:"其他参数"},{default:s((()=>[i(K,{label:"缩放比例"},{default:s((()=>[i(F,{value:m.scale,"onUpdate:value":a[10]||(a[10]=e=>m.scale=e),step:.1,onChange:X},null,8,["value","step"])])),_:1}),i(K,{label:"显示精度"},{default:s((()=>[i(I,{min:1,max:30,value:m.maximumScreenSpaceError,"onUpdate:value":a[11]||(a[11]=e=>m.maximumScreenSpaceError=e),onChange:X},null,8,["value"])])),_:1}),i(K,{label:"透明度"},{default:s((()=>[i(I,{min:.1,max:1,step:.1,value:m.opacity,"onUpdate:value":a[12]||(a[12]=e=>m.opacity=e),onChange:X},null,8,["min","step","value"])])),_:1}),i(K,{label:"单击高亮构件"},{default:s((()=>[i(R,{checked:m.highlightEnable,"onUpdate:checked":a[13]||(a[13]=e=>m.highlightEnable=e),onChange:X},null,8,["checked"]),u("span",k,[d(" 单击Popup弹窗: "),i(R,{checked:m.popupEnable,"onUpdate:checked":a[14]||(a[14]=e=>m.popupEnable=e),onChange:X},null,8,["checked"])])])),_:1})])),_:1})])),_:1}),u("div",U,[i(D,null,{default:s((()=>[i(t,{onClick:E},{default:s((()=>[d("保存参数")])),_:1})])),_:1})])])),_:1})])])),_:1}),i(W,{left:"10",top:"10",bottom:"40",width:"350",title:"查看控件",visible:M.value,"onUpdate:visible":a[16]||(a[16]=e=>M.value=e)},{default:s((()=>[c(i(t,{onClick:z},{default:s((()=>[d("取消选中")])),_:1},512),[[p,N.value]]),i(q,{onSelect:O,expandedKeys:S.value,"onUpdate:expandedKeys":a[15]||(a[15]=e=>S.value=e),"tree-data":w.value},{title:s((({title:e})=>[u("span",null,h(e),1)])),_:1},8,["expandedKeys","tree-data"])])),_:1},8,["visible"])],64)}}}),[["__scopeId","data-v-eb315bfe"]]);export{C as default};
