import{_ as e}from"./read.03cd8dda.js";import{d,s as a,au as s,aH as t,o as n,Y as o,b2 as i,a5 as r,_ as c,I as l}from"./common.5a7f0626.js";var p=e(d({__name:"index",setup(e){const d=window.mapWork,p=a([]),h=a([]),u=a([]),y={};s((()=>{f()}));const k=(e,a)=>{const s=y[a.node.key];s&&(s.isAdded||d.addLayer(s),a.node.children&&a.node.children.length&&m(e,a.node.children),-1!==e.indexOf(a.node.key)?(s.show=!0,s.flyTo()):s.show=!1)};function m(e,a){a.forEach((a=>{const s=y[a.key];s&&(s.isAdded||d.addLayer(s),-1!==e.indexOf(a.key)?s.show=!0:s.show=!1,a.children&&m(e,a.children))}))}const f=()=>{const e=d.getLayers();for(let d=e.length-1;d>=0;d--){const a=e[d];if(a&&-1===a.pid){const d={title:a.name,key:a.id,id:a.id,pId:a.pid,group:"group"===a.type};d.children=v(d,e),p.value.push(d),y[a.id]=a,h.value.push(d.key)}}};function v(e,d){return d.filter((d=>d.pid===e.id)).map((e=>{const a={title:e.name,key:e.id,id:e.id,pId:e.pid,group:"group"===e.type};return y[e.id]=e,h.value.push(a.key),(e.hasEmptyGroup||e.hasChildLayer)&&(a.children=v(a,d)),e.isAdded&&e.show&&u.value.push(a.key),a}))}return(e,d)=>{const a=t("mars-tree"),s=t("mars-dialog");return n(),o(s,{visible:!0,right:"10",top:"10",bottom:"40",width:"250"},{default:i((()=>[r(a,{checkable:"","tree-data":p.value,expandedKeys:h.value,"onUpdate:expandedKeys":d[0]||(d[0]=e=>h.value=e),checkedKeys:u.value,"onUpdate:checkedKeys":d[1]||(d[1]=e=>u.value=e),onCheck:k},{title:i((({title:e})=>[c("span",null,l(e),1)])),_:1},8,["tree-data","expandedKeys","checkedKeys"])])),_:1})}}}),[["__scopeId","data-v-1b0a94c5"]]);export{p as default};
