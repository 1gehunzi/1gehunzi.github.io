import{d as a,s as e,X as l,ap as t,aH as u,o as d,Y as s,b2 as o,a5 as n,a4 as r,b4 as c,_ as i,I as v,bn as f,B as p,x as m}from"./common.5a7f0626.js";import{a as _}from"./index.bc0c8b0e.js";import{_ as b,b as g}from"./read.03cd8dda.js";const y={href:"#"};var h=b(a({__name:"index",setup(a){const b=window.mapWork,h=e("1"),k=e(""),w=e("安徽省"),C=e("合肥市"),x=l((()=>D.value.length>0)),I=e([{title:"序号",dataIndex:"key",key:"key",width:50},{title:"名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type"},{title:"地址",dataIndex:"address",key:"address"}]),j=a=>({onClick:()=>{null!=a.graphic?b.flyToGraphic(m(a.graphic)):g(a.name+" 无经纬度坐标信息！")}}),U=()=>{b.drawRectangle()},A=()=>{b.drawCircle()},S=()=>{b.drawPolygon()},T=()=>{b.clearAll(!0),b.query(h.value,C.value,k.value)},q=e([]),z=e([]);t((async()=>{const{data:a}=await _.get("//data.mars3d.cn/file/geojson/areas/config.json");z.value=a}));const B=(a,e)=>{w.value=e[0].label,C.value=e[1].label},D=e([]);b.eventTarget.on("tableData",(a=>{D.value=[],a.data.forEach(((a,e)=>{D.value.push({key:e,name:a.name,type:a.type,address:a.address,graphic:a.graphic})}))}));const E=()=>{D.value=[],b.clearAll()};return(a,e)=>{const l=u("a-radio"),t=u("a-radio-group"),m=u("a-form-item"),_=u("a-cascader"),b=u("mars-input"),g=u("mars-button"),G=u("a-space"),H=u("mars-table"),N=u("a-form"),P=u("mars-dialog");return d(),s(P,{visible:!0,right:"10",top:"10",width:"400"},{default:o((()=>[n(N,null,{default:o((()=>[n(m,{label:"范围"},{default:o((()=>[n(t,{value:h.value,"onUpdate:value":e[0]||(e[0]=a=>h.value=a)},{default:o((()=>[n(l,{value:"1"},{default:o((()=>[r("指定城市")])),_:1}),n(l,{value:"2"},{default:o((()=>[r("当前视域")])),_:1}),n(l,{value:"3"},{default:o((()=>[r("指定范围")])),_:1})])),_:1},8,["value"])])),_:1}),c(n(m,{label:"城市"},{default:o((()=>[n(_,{value:q.value,"onUpdate:value":e[1]||(e[1]=a=>q.value=a),options:z.value,dropdownClassName:"mars-select-dropdown",onChange:B},{default:o((()=>[i("a",y,v(w.value)+" / "+v(C.value),1)])),_:1},8,["value","options"])])),_:1},512),[[f,"1"===h.value]]),n(m,{label:"关键字"},{default:o((()=>[n(b,{value:k.value,"onUpdate:value":e[2]||(e[2]=a=>k.value=a),placeholder:"查询名称和地址"},null,8,["value"])])),_:1}),c(n(m,{label:"框选"},{default:o((()=>[n(G,null,{default:o((()=>[n(g,{onClick:U},{default:o((()=>[r("框选范围")])),_:1}),n(g,{onClick:A},{default:o((()=>[r("圆形范围")])),_:1}),n(g,{onClick:S},{default:o((()=>[r("多边形范围")])),_:1})])),_:1})])),_:1},512),[[f,"3"===h.value]]),n(m,{class:"f-tac"},{default:o((()=>[n(G,null,{default:o((()=>[n(g,{onClick:T},{default:o((()=>[r("查询")])),_:1}),n(g,{onClick:E},{default:o((()=>[r("清除")])),_:1})])),_:1})])),_:1}),c(i("div",null,[n(m,null,{default:o((()=>[n(H,{pagination:!0,dataSource:D.value,columns:I.value,"custom-row":j,size:"small",bordered:"",scroll:{y:400}},null,8,["dataSource","columns"])])),_:1})],512),[[f,p(x)]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-f3eebf68"]]);export{h as default};
