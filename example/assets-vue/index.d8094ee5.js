import{_ as a,m as e,u as l,r as t,o as n,q as u,z as s,f as i,i as d,a as o,t as c,w as v,j as r}from"./common.10acb102.js";const m={class:"inputWidth"},f={style:{color:"red"}},p={class:"f-tac"},_={class:"f-mt"};var h=a(e({__name:"index",setup(a){const e=window.mapWork,h=l(""),b=l(0),g=l("1"),k=l([]),y=[{title:"序号",dataIndex:"index",key:"index",width:50},{title:"名称",dataIndex:"name",key:"name"},{title:"总距离",dataIndex:"length",key:"length"},{title:"时间",dataIndex:"time",key:"time"}],x=a=>({onClick:()=>{e.centerAtRoute(a.graphic)}}),w=l([{value:"1",label:"步行路线查询"},{value:"3",label:"驾车路线查询"}]),C=async()=>{const a=await e.startPoint();h.value=a},I=()=>{e.endPoint()};e.eventTarget.on("end",(a=>{b.value=a.count}));const W=a=>{h.value&&0!==b.value&&A()},A=()=>{k.value=[],e.btnAnalyse(g.value,b.value)};e.eventTarget.on("analyse",(a=>{k.value.push({key:a.i,index:a.i+1,name:a.name,length:a.distance,time:a.time,graphic:a.id})}));const P=()=>{e.removeAll(),k.value=[],h.value="",b.value=0};return(a,e)=>{const l=t("mars-select"),j=t("a-form-item"),z=t("mars-input"),S=t("mars-button"),T=t("a-space"),U=t("mars-table"),q=t("a-form"),O=t("mars-dialog");return n(),u(O,{visible:!0,right:"10",top:"10",width:"300"},{default:s((()=>[i(q,null,{default:s((()=>[i(j,{label:"方式"},{default:s((()=>[i(l,{class:"selectWidth",value:g.value,"onUpdate:value":e[0]||(e[0]=a=>g.value=a),options:w.value,onChange:W},null,8,["value","options"])])),_:1}),i(j,{label:"起点"},{default:s((()=>[i(T,null,{default:s((()=>[i(z,{class:"inputWidth",value:h.value,"onUpdate:value":e[1]||(e[1]=a=>h.value=a),disabled:""},null,8,["value"]),i(S,{onClick:C},{default:s((()=>[d("选点")])),_:1})])),_:1})])),_:1}),i(j,{label:"终点"},{default:s((()=>[i(T,null,{default:s((()=>[o("p",m,[d(" 共"),o("span",f,c(b.value),1),d("条POI点 ")]),i(S,{onClick:I},{default:s((()=>[d("查询")])),_:1})])),_:1})])),_:1}),o("div",p,[i(T,null,{default:s((()=>[i(S,{onClick:A},{default:s((()=>[d("开始分析")])),_:1}),i(S,{onClick:P},{default:s((()=>[d("清除")])),_:1})])),_:1})]),v(o("div",_,[i(U,{pagination:!1,dataSource:k.value,columns:y,"custom-row":x,size:"small",bordered:"",scroll:{y:300}},null,8,["dataSource"])],512),[[r,k.value.length>0]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-70f1f540"]]);export{h as default};
