import{d as a,s as e,aH as l,o as t,Y as n,b2 as u,a5 as s,a4 as d,_ as o,I as i,b4 as c,bn as r}from"./common.5a7f0626.js";import{_ as v}from"./read.03cd8dda.js";const m={class:"inputWidth"},f={style:{color:"red"}},p={class:"f-tac"},_={class:"f-mt"};var b=v(a({__name:"index",setup(a){const v=window.mapWork,b=e(""),h=e(0),g=e("1"),k=e([]),y=[{title:"序号",dataIndex:"index",key:"index",width:50},{title:"名称",dataIndex:"name",key:"name"},{title:"总距离",dataIndex:"length",key:"length"},{title:"时间",dataIndex:"time",key:"time"}],x=a=>({onClick:()=>{v.centerAtRoute(a.graphic)}}),I=e([{value:"1",label:"步行路线查询"},{value:"3",label:"驾车路线查询"}]),w=async()=>{const a=await v.startPoint();b.value=a},C=()=>{v.endPoint()};v.eventTarget.on("end",(a=>{h.value=a.count}));const W=a=>{b.value&&0!==h.value&&A()},A=()=>{k.value=[],v.btnAnalyse(g.value,h.value)};v.eventTarget.on("analyse",(a=>{k.value.push({key:a.i,index:a.i+1,name:a.name,length:a.distance,time:a.time,graphic:a.id})}));const P=()=>{v.removeAll(),k.value=[],b.value="",h.value=0};return(a,e)=>{const v=l("mars-select"),j=l("a-form-item"),S=l("mars-input"),T=l("mars-button"),U=l("a-space"),z=l("mars-table"),H=l("a-form"),O=l("mars-dialog");return t(),n(O,{visible:!0,right:"10",top:"10",width:"300"},{default:u((()=>[s(H,null,{default:u((()=>[s(j,{label:"方式"},{default:u((()=>[s(v,{class:"selectWidth",value:g.value,"onUpdate:value":e[0]||(e[0]=a=>g.value=a),options:I.value,onChange:W},null,8,["value","options"])])),_:1}),s(j,{label:"起点"},{default:u((()=>[s(U,null,{default:u((()=>[s(S,{class:"inputWidth",value:b.value,"onUpdate:value":e[1]||(e[1]=a=>b.value=a),disabled:""},null,8,["value"]),s(T,{onClick:w},{default:u((()=>[d("选点")])),_:1})])),_:1})])),_:1}),s(j,{label:"终点"},{default:u((()=>[s(U,null,{default:u((()=>[o("p",m,[d(" 共"),o("span",f,i(h.value),1),d("条POI点 ")]),s(T,{onClick:C},{default:u((()=>[d("查询")])),_:1})])),_:1})])),_:1}),o("div",p,[s(U,null,{default:u((()=>[s(T,{onClick:A},{default:u((()=>[d("开始分析")])),_:1}),s(T,{onClick:P},{default:u((()=>[d("清除")])),_:1})])),_:1})]),c(o("div",_,[s(z,{pagination:!1,dataSource:k.value,columns:y,"custom-row":x,size:"small",bordered:"",scroll:{y:300}},null,8,["dataSource"])],512),[[r,k.value.length>0]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-70f1f540"]]);export{b as default};
