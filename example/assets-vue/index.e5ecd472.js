import{_ as a,m as e,u as l,x as t,aD as u,r as d,o as s,q as o,z as n,f as r,i as c,w as i,a as v,t as f,j as m,A as p,Y as _}from"./common.10acb102.js";import{a as y}from"./index.bc0c8b0e.js";import{e as g}from"./style.795f3750.js";const b={href:"#"};var h=a(e({__name:"index",setup(a){const e=window.mapWork,h=l("1"),k=l(""),w=l("安徽省"),C=l("合肥市"),x=t((()=>E.value.length>0)),j=l([{title:"序号",dataIndex:"key",key:"key",width:50},{title:"名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type"},{title:"地址",dataIndex:"address",key:"address"}]),I=a=>({onClick:()=>{null!=a.graphic?e.flyToGraphic(_(a.graphic)):g(a.name+" 无经纬度坐标信息！")}}),A=()=>{e.drawRectangle()},U=()=>{e.drawCircle()},q=()=>{e.drawPolygon()},z=()=>{e.clearAll(!0),e.query(h.value,C.value,k.value)},D=l([]),S=l([]);u((async()=>{const{data:a}=await y.get("//data.mars3d.cn/file/geojson/areas/config.json");S.value=a}));const T=(a,e)=>{w.value=e[0].label,C.value=e[1].label},E=l([]);e.eventTarget.on("tableData",(a=>{E.value=[],a.data.forEach(((a,e)=>{E.value.push({key:e,name:a.name,type:a.type,address:a.address,graphic:a.graphic})}))}));const G=()=>{E.value=[],e.clearAll()};return(a,e)=>{const l=d("a-radio"),t=d("a-radio-group"),u=d("a-form-item"),_=d("a-cascader"),y=d("mars-input"),g=d("mars-button"),N=d("a-space"),P=d("mars-table"),R=d("a-form"),W=d("mars-dialog");return s(),o(W,{visible:!0,right:"10",top:"10",width:"400"},{default:n((()=>[r(R,null,{default:n((()=>[r(u,{label:"范围"},{default:n((()=>[r(t,{value:h.value,"onUpdate:value":e[0]||(e[0]=a=>h.value=a)},{default:n((()=>[r(l,{value:"1"},{default:n((()=>[c("指定城市")])),_:1}),r(l,{value:"2"},{default:n((()=>[c("当前视域")])),_:1}),r(l,{value:"3"},{default:n((()=>[c("指定范围")])),_:1})])),_:1},8,["value"])])),_:1}),i(r(u,{label:"城市"},{default:n((()=>[r(_,{value:D.value,"onUpdate:value":e[1]||(e[1]=a=>D.value=a),options:S.value,dropdownClassName:"mars-select-dropdown",onChange:T},{default:n((()=>[v("a",b,f(w.value)+" / "+f(C.value),1)])),_:1},8,["value","options"])])),_:1},512),[[m,"1"===h.value]]),r(u,{label:"关键字"},{default:n((()=>[r(y,{value:k.value,"onUpdate:value":e[2]||(e[2]=a=>k.value=a),placeholder:"查询名称和地址"},null,8,["value"])])),_:1}),i(r(u,{label:"框选"},{default:n((()=>[r(N,null,{default:n((()=>[r(g,{onClick:A},{default:n((()=>[c("框选范围")])),_:1}),r(g,{onClick:U},{default:n((()=>[c("圆形范围")])),_:1}),r(g,{onClick:q},{default:n((()=>[c("多边形范围")])),_:1})])),_:1})])),_:1},512),[[m,"3"===h.value]]),r(u,{class:"f-tac"},{default:n((()=>[r(N,null,{default:n((()=>[r(g,{onClick:z},{default:n((()=>[c("查询")])),_:1}),r(g,{onClick:G},{default:n((()=>[c("清除")])),_:1})])),_:1})])),_:1}),i(v("div",null,[r(u,null,{default:n((()=>[r(P,{pagination:!0,dataSource:E.value,columns:j.value,"custom-row":I,size:"small",bordered:"",scroll:{y:400}},null,8,["dataSource","columns"])])),_:1})],512),[[m,p(x)]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-f3eebf68"]]);export{h as default};
