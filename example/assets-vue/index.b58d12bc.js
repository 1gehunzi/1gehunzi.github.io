import{_ as e,w as a}from"./read.03cd8dda.js";import{L as t}from"./location-to.e2a3f5bb.js";import{d as o,s as l,au as n,m as i,aH as s,o as c,c as d,a5 as r,b2 as u,_ as p,a4 as v,M as f,aF as m,aC as h,aA as g}from"./common.5a7f0626.js";const y={class:"f-mb infoView-content"},b=(e=>(h("data-v-3cb0b8f2"),e=e(),g(),e))((()=>p("span",null,"模型列表： ",-1))),k={title:"打开GeoJSON文件"},w={title:"保存GeoJSON"},_={title:"删除"},T={class:"f-mb f-tac"},C={class:"f-mb"},S={class:"gltfImg"},E=["src","onClick"];var j=e(o({__name:"index",setup(e){const o=window.mapWork,h=l(!1),g=()=>{o.chkTestTerrain(h.value)},j=l(!1),L=()=>{o.onlyPickModelPosition(j.value)};let J;const O=l([]),U=l("车辆"),x=l([]);o.eventTarget.on("loadModelList",(function(e){J=e.data,Object.keys(J).forEach((e=>{O.value.push({value:e,lable:e})})),I()}));const I=()=>{x.value=J[U.value];for(let e=0;e<x.value.length;e++){const a=x.value[e];a.image=o.changeItemImage(a),a.style.url=o.changeItemUrl(a),x.value[e]=a}},G=e=>{const a=e.file,t=a.name;"json"!==(null==t?void 0:t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase())&&alert("文件类型不合法,请选择json格式标注文件！"),o.openGeoJSON(a)},M=()=>{o.saveGeoJSON()},{activate:N,disable:P,isActivate:W,updateWidget:A}=a.exports.useWidget();n((()=>{const e=window.mapWork.mars3d;o.graphicLayer.on(e.EventType.drawCreated,(function(e){D(e)})),o.graphicLayer.on([e.EventType.editStart,e.EventType.editMovePoint,e.EventType.editStyle,e.EventType.editRemovePoint],(function(e){D(e)})),o.graphicLayer.on([e.EventType.editStop,e.EventType.removeGraphic],(function(e){setTimeout((()=>{o.graphicLayer.isEditing||P("graphic-editor")}),100)}))}));const D=e=>{const a=e.graphic;a._conventStyleJson||(a.options.style=a.toJSON().style,a._conventStyleJson=!0),W("graphic-editor")?A("graphic-editor",{data:{graphic:i(a)}}):N({name:"graphic-editor",data:{graphic:i(a)}})},F=()=>{o.deleteAll()};return(e,a)=>{const l=s("mars-icon"),n=s("a-upload"),i=s("a-space"),J=s("a-checkbox"),N=s("mars-select"),P=s("mars-dialog");return c(),d(f,null,[r(P,{visible:!0,right:"10",top:"10",bottom:"110",width:"270"},{default:u((()=>[p("div",y,[r(i,null,{default:u((()=>[b,r(n,{multiple:!1,name:"file",accept:"json,geojson",showUploadList:!1,onChange:G,beforeUpload:()=>!1},{default:u((()=>[p("i",k,[r(l,{icon:"folder-upload",width:"19"})])])),_:1},8,["beforeUpload"]),p("i",w,[r(l,{icon:"disk",width:"17",color:"#f2f2f2",onClick:M})]),p("i",_,[r(l,{icon:"delete",width:"17",color:"#f2f2f2",onClick:F})])])),_:1})]),p("div",T,[r(J,{onChange:g,checked:h.value,"onUpdate:checked":a[0]||(a[0]=e=>h.value=e),title:"深度检测"},{default:u((()=>[v("深度检测")])),_:1},8,["checked"]),r(J,{onChange:L,checked:j.value,"onUpdate:checked":a[1]||(a[1]=e=>j.value=e)},{default:u((()=>[v("仅在Tiles上拾取")])),_:1},8,["checked"])]),p("div",C,[r(N,{ref:"select",value:U.value,"onUpdate:value":a[2]||(a[2]=e=>U.value=e),style:{width:"93%","margin-left":"5px"},options:O.value,onChange:I,class:"mars-select_bottom"},null,8,["value","options"]),p("div",S,[p("ul",null,[(c(!0),d(f,null,m(x.value,(e=>(c(),d("li",{key:e.name},[p("img",{src:e.image,alt:"",onClick:a=>{return t=e.style,void o.startDrawModel(t);var t}},null,8,E)])))),128))])])])])),_:1}),r(t)],64)}}}),[["__scopeId","data-v-3cb0b8f2"]]);export{j as default};
