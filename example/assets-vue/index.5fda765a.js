import{L as e}from"./location-to.e2a3f5bb.js";import{w as a}from"./read.03cd8dda.js";import{d as t,s as o,au as n,m as l,aH as c,o as d,c as i,a5 as s,b2 as r,_ as u,a4 as p,M as v}from"./common.5a7f0626.js";const h={class:"f-mb"},f=u("span",null,"模型URL地址: ",-1),m={class:"f-mb"},g={class:"f-pt"},k=t({__name:"index",setup(t){const k=window.mapWork,y=o("//data.mars3d.cn/gltf/mars/feiji.glb"),_=o(!1),b=()=>{k.startDrawModel(y.value,_.value)},T=o(!0),U=()=>{k.chkHasTerrain(T.value)},w=o(!1),C=()=>{k.chkTestTerrain(w.value)},E=o(!1),L=()=>{k.onlyPickModelPosition(E.value)},S=()=>{k.graphicLayer.clear()},j=e=>{k.openGeoJSON(e.file)},J=()=>{k.saveGeoJSON()},{activate:x,disable:M,isActivate:P,updateWidget:W}=a.exports.useWidget();n((()=>{const e=window.mapWork.mars3d;k.graphicLayer.on(e.EventType.drawCreated,(function(e){G(e)})),k.graphicLayer.on([e.EventType.editStart,e.EventType.editMovePoint,e.EventType.editStyle,e.EventType.editRemovePoint],(function(e){G(e)})),k.graphicLayer.on([e.EventType.editStop,e.EventType.removeGraphic],(function(e){setTimeout((()=>{k.graphicLayer.isEditing||M("graphic-editor")}),100)}))}));const G=e=>{const a=e.graphic;a._conventStyleJson||(a.options.style=a.toJSON().style,a._conventStyleJson=!0),P("graphic-editor")?W("graphic-editor",{data:{graphic:l(a)}}):x({name:"graphic-editor",data:{graphic:l(a)}})};return(a,t)=>{const o=c("a-checkbox"),n=c("mars-input"),l=c("mars-button"),k=c("a-upload"),x=c("a-space"),M=c("mars-dialog");return d(),i(v,null,[s(M,{visible:!0,right:"10",top:"10"},{default:r((()=>[u("div",h,[f,p("    "),s(o,{checked:_.value,"onUpdate:checked":t[0]||(t[0]=e=>_.value=e)},{default:r((()=>[p("使用代理")])),_:1},8,["checked"]),s(n,{value:y.value,"onUpdate:value":t[1]||(t[1]=e=>y.value=e)},null,8,["value"])]),u("div",m,[s(x,null,{default:r((()=>[s(l,{onClick:b},{default:r((()=>[p("标绘")])),_:1}),s(l,{onClick:S},{default:r((()=>[p("清除")])),_:1}),s(l,{onClick:J},{default:r((()=>[p("保存")])),_:1}),s(k,{multiple:!1,name:"file",accept:"json,geojson",showUploadList:!1,onChange:j,beforeUpload:()=>!1},{default:r((()=>[s(l,null,{default:r((()=>[p(" 打开... ")])),_:1})])),_:1},8,["beforeUpload"])])),_:1}),u("div",g,[s(x,null,{default:r((()=>[s(o,{onChange:C,checked:w.value,"onUpdate:checked":t[2]||(t[2]=e=>w.value=e)},{default:r((()=>[p("深度检测")])),_:1},8,["checked"]),s(o,{onChange:L,checked:E.value,"onUpdate:checked":t[3]||(t[3]=e=>E.value=e)},{default:r((()=>[p("仅在Tiles上拾取")])),_:1},8,["checked"]),s(o,{onChange:U,checked:T.value,"onUpdate:checked":t[4]||(t[4]=e=>T.value=e)},{default:r((()=>[p("地形")])),_:1},8,["checked"])])),_:1})])])])),_:1}),s(e)],64)}}});export{k as default};
